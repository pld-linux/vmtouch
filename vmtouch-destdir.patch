From 1640b6b2ab924915fcad010c09717aaaf0b6377c Mon Sep 17 00:00:00 2001
From: Earnestly <zibeon@googlemail.com>
Date: Sun, 23 Apr 2017 15:02:00 +0100
Subject: [PATCH] support staged installs using DESTDIR

---
 Makefile | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/Makefile b/Makefile
index 535138b..db484d7 100644
--- a/Makefile
+++ b/Makefile
@@ -16,12 +16,11 @@ vmtouch.8: vmtouch.pod
 	pod2man --section 8 --center "System Manager's Manual" --release " " vmtouch.pod > vmtouch.8
 
 install: vmtouch vmtouch.8
-	mkdir -p $(BINDIR) $(MANDIR)
-	install -m 0755 vmtouch $(BINDIR)/vmtouch
-	install -m 0644 vmtouch.8 $(MANDIR)/vmtouch.8
+	install -Dm 0755 vmtouch $(DESTDIR)$(BINDIR)/vmtouch
+	install -Dm 0644 vmtouch.8 $(DESTDIR)$(MANDIR)/vmtouch.8
 
 clean:
 	rm -f vmtouch vmtouch.8
 
 uninstall:
-	rm $(BINDIR)/vmtouch $(MANDIR)/vmtouch.8
+	rm $(DESTDIR)$(BINDIR)/vmtouch $(DESTDIR)$(MANDIR)/vmtouch.8
